<div class="productos-layout card-appear">
  <div class="productos-header">
    <h1 class="h1">Presupuestos</h1>
    <button *ngIf="auth.canEdit()" class="btn-primary" (click)="nuevo()">Nuevo presupuesto</button>
  </div>

  <div class="productos-busqueda">
    <input class="input" placeholder="Buscar presupuesto..." [(ngModel)]="q" (keyup.enter)="buscar()"/>
    <button class="btn-primary" style="width:auto" (click)="buscar()">Buscar</button>
  </div>

  <div *ngIf="loading" class="text-muted" style="text-align:center;">Cargandoâ€¦</div>
  <div *ngIf="!loading && data.length===0" class="text-muted" style="text-align:center;">Sin resultados.</div>

  <div class="productos-tabla" *ngIf="!loading && data.length">
    <table>
      <thead><tr><th>ID</th><th>Cliente</th><th>Total</th><th>Estado</th><th>Acciones</th></tr></thead>
      <tbody>
        <tr *ngFor="let p of data">
          <td>{{p.id}}</td>
          <td>{{p.cliente_id}}</td>
          <td>{{p.total | number:'1.2-2'}}</td>
          <td>{{p.estado || 'borrador'}}</td>
          <td class="acciones">
            <button *ngIf="auth.canEdit()" class="btn-accion gray" (click)="editar(p)">Editar</button>
            <button *ngIf="auth.canDelete()" class="btn-accion red" (click)="eliminar(p)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
