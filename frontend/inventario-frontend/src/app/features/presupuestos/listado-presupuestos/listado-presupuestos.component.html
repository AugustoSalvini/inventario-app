<h2>Presupuestos</h2>

<div style="display:flex; gap:1rem; align-items:center">
  <a routerLink="/productos">Volver a productos</a>
  <input placeholder="Buscar por id o estado..." [(ngModel)]="q" />
  <button (click)="buscar()">Buscar</button>
  <a routerLink="/presupuestos/nuevo">Nuevo presupuesto</a>
</div>

<p *ngIf="loading">Cargando...</p>
<p *ngIf="error" style="color:red">{{ error }}</p>
<p *ngIf="!loading && !error && data.length === 0">Sin resultados.</p>

<table *ngIf="!loading && !error && data.length > 0" border="1" cellpadding="6">
  <thead>
    <tr>
      <th>ID</th>
      <th>Cliente ID</th>
      <th>Total</th>
      <th>Estado</th>
      <th>Notas</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of data">
      <td>{{ p.id }}</td>
      <td>{{ p.cliente_id }}</td>
      <td>{{ p.total | number:'1.2-2' }}</td>
      <td>{{ p.estado }}</td>
      <td>{{ p.notas || '-' }}</td>
      <td>
        <a [routerLink]="['/presupuestos', p.id, 'editar']">Editar</a>
      </td>
    </tr>
  </tbody>
</table>
